language: python
python:
    - "3.6"

services:
    - docker

install:
    - pip install flake8
    - docker build . -t baselines-test

script:
    - flake8 --select=F baselines/common
    - docker run baselines-test sh -c 'pytest --cov-report term --cov-report xml --cov=. && python-codacy-coverage -r coverage.xml --token=$CODACY_PROJECT_TOKEN'